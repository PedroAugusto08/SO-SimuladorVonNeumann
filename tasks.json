{
  "metadata": {
    "task_id": "prog_extended_test",
    "author": "grupoPeripherals",
    "description": "Programa EXPANDIDO para testar Round Robin com preempção - ~300 instruções"
  },
  "data": {
    "x": 15,
    "y": 25,
    "z": 0,
    "numbers": [5, 10, 15, 20, 25, 30, 35, 40],
    "result": [0, 0, 0, 0, 0, 0, 0, 0],
    "matrixA": [1, 2, 3, 4],
    "matrixB": [5, 6, 7, 8],
    "matrixC": [0, 0, 0, 0],
    "flag": 0,
    "counter": 50,
    "inner_counter": 10,
    "outer_counter": 5,
    "sum": 0,
    "product": 1,
    "output": [0, 0, 0, 0, 0, 0, 0, 0]
  },
  "program": [
    { "label": "start", "instruction": "li", "rt": "$t0", "immediate": 100 },
    { "instruction": "addi", "rt": "$t1", "rs": "$zero", "immediate": 5 },
    { "instruction": "add", "rd": "$t2", "rs": "$t0", "rt": "$t1" },
    { "instruction": "sub", "rd": "$t3", "rs": "$t0", "rt": "$t1" },
    { "instruction": "and", "rd": "$t4", "rs": "$t0", "rt": "$t1" },
    { "instruction": "or", "rd": "$t5", "rs": "$t0", "rt": "$t1" },
    { "instruction": "mult", "rd": "$t6", "rs": "$t1", "rt": "$t1" },
    { "instruction": "div", "rd": "$t7", "rs": "$t0", "rt": "$t1" },

    { "instruction": "lw", "rt": "$s0", "offset": 0, "base": "x" },
    { "instruction": "lw", "rt": "$s1", "offset": 0, "base": "y" },
    { "instruction": "add", "rd": "$s2", "rs": "$s0", "rt": "$s1" },
    { "instruction": "sw", "rt": "$s2", "offset": 0, "base": "z" },

    { "instruction": "lw", "rt": "$s3", "offset": 2, "base": "numbers" },
    { "instruction": "addi", "rt": "$s3", "rs": "$s3", "immediate": 10 },
    { "instruction": "sw", "rt": "$s3", "offset": 1, "base": "result" },

    { "label": "outer_loop", "instruction": "lw", "rt": "$s4", "offset": 0, "base": "outer_counter" },
    { "instruction": "beq", "rs": "$s4", "rt": "$zero", "label": "end_outer_loop" },
    
    { "instruction": "li", "rt": "$s5", "immediate": 10 },
    { "instruction": "sw", "rt": "$s5", "offset": 0, "base": "inner_counter" },
    
    { "label": "inner_loop", "instruction": "lw", "rt": "$s5", "offset": 0, "base": "inner_counter" },
    { "instruction": "beq", "rs": "$s5", "rt": "$zero", "label": "end_inner_loop" },
    
    { "instruction": "lw", "rt": "$s6", "offset": 0, "base": "sum" },
    { "instruction": "addi", "rt": "$s6", "rs": "$s6", "immediate": 1 },
    { "instruction": "sw", "rt": "$s6", "offset": 0, "base": "sum" },
    
    { "instruction": "lw", "rt": "$s7", "offset": 0, "base": "product" },
    { "instruction": "add", "rd": "$s7", "rs": "$s7", "rt": "$s6" },
    { "instruction": "sw", "rt": "$s7", "offset": 0, "base": "product" },
    
    { "instruction": "add", "rd": "$t2", "rs": "$t0", "rt": "$t1" },
    { "instruction": "sub", "rd": "$t3", "rs": "$t2", "rt": "$t1" },
    { "instruction": "and", "rd": "$t4", "rs": "$t3", "rt": "$t0" },
    { "instruction": "or", "rd": "$t5", "rs": "$t4", "rt": "$t1" },
    
    { "instruction": "lw", "rt": "$a0", "offset": 0, "base": "numbers" },
    { "instruction": "lw", "rt": "$a1", "offset": 1, "base": "numbers" },
    { "instruction": "add", "rd": "$a2", "rs": "$a0", "rt": "$a1" },
    { "instruction": "sw", "rt": "$a2", "offset": 0, "base": "result" },
    
    { "instruction": "addi", "rt": "$s5", "rs": "$s5", "immediate": -1 },
    { "instruction": "sw", "rt": "$s5", "offset": 0, "base": "inner_counter" },
    { "instruction": "j", "label": "inner_loop" },
    
    { "label": "end_inner_loop", "instruction": "addi", "rt": "$s4", "rs": "$s4", "immediate": -1 },
    { "instruction": "sw", "rt": "$s4", "offset": 0, "base": "outer_counter" },
    { "instruction": "j", "label": "outer_loop" },
    
    { "label": "end_outer_loop", "instruction": "lw", "rt": "$t8", "offset": 0, "base": "counter" },
    { "instruction": "beq", "rs": "$t8", "rt": "$zero", "label": "matrix_ops" },
    
    { "label": "count_loop", "instruction": "lw", "rt": "$t8", "offset": 0, "base": "counter" },
    { "instruction": "beq", "rs": "$t8", "rt": "$zero", "label": "matrix_ops" },
    
    { "instruction": "add", "rd": "$t2", "rs": "$t0", "rt": "$t1" },
    { "instruction": "sub", "rd": "$t3", "rs": "$t2", "rt": "$t1" },
    { "instruction": "mult", "rd": "$t4", "rs": "$t1", "rt": "$t1" },
    { "instruction": "div", "rd": "$t5", "rs": "$t2", "rt": "$t1" },
    
    { "instruction": "addi", "rt": "$t8", "rs": "$t8", "immediate": -1 },
    { "instruction": "sw", "rt": "$t8", "offset": 0, "base": "counter" },
    { "instruction": "j", "label": "count_loop" },
    
    { "label": "matrix_ops", "instruction": "lw", "rt": "$t0", "offset": 0, "base": "matrixA" },
    { "instruction": "lw", "rt": "$t1", "offset": 0, "base": "matrixB" },
    { "instruction": "mult", "rd": "$t2", "rs": "$t0", "rt": "$t1" },
    { "instruction": "sw", "rt": "$t2", "offset": 0, "base": "matrixC" },
    
    { "instruction": "lw", "rt": "$t0", "offset": 1, "base": "matrixA" },
    { "instruction": "lw", "rt": "$t1", "offset": 1, "base": "matrixB" },
    { "instruction": "mult", "rd": "$t2", "rs": "$t0", "rt": "$t1" },
    { "instruction": "sw", "rt": "$t2", "offset": 1, "base": "matrixC" },
    
    { "instruction": "lw", "rt": "$t0", "offset": 2, "base": "matrixA" },
    { "instruction": "lw", "rt": "$t1", "offset": 2, "base": "matrixB" },
    { "instruction": "mult", "rd": "$t2", "rs": "$t0", "rt": "$t1" },
    { "instruction": "sw", "rt": "$t2", "offset": 2, "base": "matrixC" },
    
    { "instruction": "lw", "rt": "$t0", "offset": 3, "base": "matrixA" },
    { "instruction": "lw", "rt": "$t1", "offset": 3, "base": "matrixB" },
    { "instruction": "mult", "rd": "$t2", "rs": "$t0", "rt": "$t1" },
    { "instruction": "sw", "rt": "$t2", "offset": 3, "base": "matrixC" },
    
    { "label": "array_processing", "instruction": "li", "rt": "$t9", "immediate": 0 },
    
    { "label": "array_loop", "instruction": "addi", "rt": "$t0", "rs": "$zero", "immediate": 8 },
    { "instruction": "beq", "rs": "$t9", "rt": "$t0", "label": "end_array_loop" },
    
    { "instruction": "lw", "rt": "$t1", "offset": 0, "base": "numbers" },
    { "instruction": "add", "rd": "$t1", "rs": "$t1", "rt": "$t9" },
    { "instruction": "mult", "rd": "$t1", "rs": "$t1", "rt": "$t1" },
    { "instruction": "div", "rd": "$t1", "rs": "$t1", "rt": "$t0" },
    { "instruction": "sw", "rt": "$t1", "offset": 0, "base": "output" },
    
    { "instruction": "addi", "rt": "$t9", "rs": "$t9", "immediate": 1 },
    { "instruction": "j", "label": "array_loop" },
    
    { "label": "end_array_loop", "instruction": "add", "rd": "$t8", "rs": "$zero", "rt": "$zero" },
    { "instruction": "bgt", "rs": "$t0", "rt": "$t1", "label": "greater_case" },
    { "instruction": "blt", "rs": "$t0", "rt": "$t1", "label": "less_case" },

    { "label": "greater_case", "instruction": "li", "rt": "$a0", "immediate": 111 },
    { "instruction": "j", "label": "after_compare" },

    { "label": "less_case", "instruction": "li", "rt": "$a0", "immediate": 222 },

    { "label": "after_compare", "instruction": "print", "rt": "$a0" },
    
    { "instruction": "lw", "rt": "$v0", "offset": 0, "base": "sum" },
    { "instruction": "print", "rt": "$v0" },
    
    { "instruction": "lw", "rt": "$v1", "offset": 0, "base": "product" },
    { "instruction": "print", "rt": "$v1" },

    { "label": "end", "instruction": "end" }
  ]
}
